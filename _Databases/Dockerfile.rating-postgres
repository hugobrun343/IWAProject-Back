FROM postgres:15-alpine

# Expose PostgreSQL port
EXPOSE 5432

# Set data directory
VOLUME ["/var/lib/postgresql/data/rating-db"]

# Health check
HEALTHCHECK --interval=30s --timeout=10s --start-period=60s --retries=3 \
    CMD pg_isready -U ${POSTGRES_USER} -d ${POSTGRES_DB} || exit 1
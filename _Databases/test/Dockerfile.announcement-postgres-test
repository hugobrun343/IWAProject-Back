FROM postgres:15-alpine

# Test environment optimizations for faster tests
RUN echo "# Test environment optimizations" >> /usr/local/share/postgresql/postgresql.conf.sample && \
    echo "fsync = off" >> /usr/local/share/postgresql/postgresql.conf.sample && \
    echo "synchronous_commit = off" >> /usr/local/share/postgresql/postgresql.conf.sample && \
    echo "full_page_writes = off" >> /usr/local/share/postgresql/postgresql.conf.sample && \
    echo "shared_buffers = 256MB" >> /usr/local/share/postgresql/postgresql.conf.sample
